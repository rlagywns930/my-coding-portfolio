# 📄 LSTM 기반 수위 예측 시스템

아두이노와 초음파 센서를 활용하여 수위 상승 데이터를 실시간으로 수집하고,  
이를 기반으로 LSTM(Long Short-Term Memory) 모델을 통해 물이 가득 찰 때까지의 남은 시간을 예측하는 실험 프로젝트입니다.

---

## 📌 프로젝트 배경

2025년 7월, 서해안과 수도권에 머물던 비구름대가 충청 지역에서 합쳐지며 강한 집중호우가 발생했고,  
이로 인해 주택, 농경지, 도로, 지하차도 등에서 침수 및 재산 피해가 잇따랐습니다.

이러한 사례는 수위 모니터링과 조기 예측 시스템의 중요성을 다시금 부각시켰으며,  
특히 홍수, 범람과 같은 재난은 수위 변화와 직접적으로 연결되므로,  
실시간으로 작동 가능한 수위 예측 시스템의 구축이 필수적입니다.

하지만 상용 수위 측정 장비는 고가인 경우가 많아 일반 사용자나 소규모 기관에서는 도입이 어렵습니다.  
이에 따라 본 프로젝트에서는 저비용 하드웨어(HC-SR04 + Arduino)를 활용하고,  
여기에 딥러닝 기반 LSTM 모델을 접목해 실시간 수위 예측 시스템의 가능성을 실험적으로 제시합니다.

---

## 🎯 프로젝트 목표

- 초음파 센서를 통해 수위 상승 시점의 거리 및 시간 데이터를 실시간 수집  
- 수집된 시계열 데이터를 LSTM 모델에 적용하여 만수위까지 걸리는 총 시간 예측  
- 사전 설정한 기준 시간(70초) 보다 예측값이 짧을 경우 침수 가능성 경고  
- 스마트 재난 예방 시스템의 기초 기술로 활용 가능성 평가  

---

## 🧪 실험 구성

| 구성 요소   | 상세 내용                          |
| --------- | -------------------------------- |
| 센서        | HC-SR04 초음파 거리 센서           |
| 제어 장치    | Arduino Uno                      |
| 측정 대상    | 투명 플라스틱 물병 (높이 25cm)    |
| 측정 조건    | 수위 비율 기준 - 1/10, 1/8, 1/6, 1/4, 1/2, 만수위 |
| 데이터 전송  | 시리얼 통신으로 Python에 실시간 전송 |
| 측정 방식    | 물을 천천히 또는 빠르게 채우며 거리 및 시간 기록 |

---

## 📈 데이터 수집 및 전처리

- 초음파 센서를 통해 수면까지의 거리(cm)와 경과 시간(s) 측정  
- 특정 수위에 도달한 시점을 자동으로 기록  
- 이상치 제거 및 정규화 (Min-Max Scaling) 적용  
- `experiment_data.csv` 형식으로 데이터 저장  

---

## 🤖 LSTM 모델 설계

- **입력 (X)** : 각 수위 지점(5개)의 도달 시간  
- **출력 (y)** : 물이 가득 찰 때까지의 총 소요 시간  

### 🔧 모델 구조

- Input → LSTM(units=64) → Dense(1) → Output

- - 손실 함수: Mean Squared Error (MSE)  
- 최적화 알고리즘: Adam  
- 학습 횟수: 300 epochs  
- 프레임워크: TensorFlow / Keras  

---

## 📊 예측 결과 분석

- 예측값과 실제 측정값을 비교하여 시각화  
- 기준 시간(70초)과의 차이를 통해 침수 위험 판단 로직 구현  
- 예측 오차 (MAE, RMSE 등)를 통해 모델 정확도 평가  
- 결과는 `Images.md` 및 그래프 폴더에서 확인 가능  

---

## ▶ 실행 방법

1. **아두이노 연결 및 업로드**  
   - `arduino_ultrasonic.ino` 파일을 아두이노 IDE로 열어 업로드  

2. **데이터 수집**  
   - 시리얼 모니터 또는 Python 스크립트를 통해 거리/시간 데이터 수신  

3. **CSV 저장**  
   - 수집 데이터를 `experiment_data.csv` 파일로 저장  

4. **모델 실행**  
   ```bash
   02. 수위에측_LSTM_모델.py
5. **예측 결과 확인**
   - 시각화 그래프 및 오차 분석 결과 출력

## 📁 파일 구성

| 파일명                         | 설명                          |
|------------------------------|-----------------------------|
| `01. 아두이노_수위_측정_코드.ino` | 수위 측정용 아두이노 코드         |
| `02. 수위예측_LSTM_모델.py`         | LSTM 기반 수위 예측 Python 코드   |
| `03. experiment_data.csv`         | 실험 데이터 (거리, 시간)           |
| `04. Images.md`                   | 예측 결과 및 시각화 이미지 설명    |
| `README.md`                      | 프로젝트 설명 및 실행 가이드 문서  |

---

## ✍️ 연구 의의 및 한계

### ✅ 연구 의의
- 저비용 센서와 간단한 하드웨어 구성으로 딥러닝 기반 수위 예측 시스템 구현 가능성 확인  
- 실시간 데이터 수집과 LSTM 모델 적용을 통해 스마트 재난 예방 기술로의 활용 가능성 제시  

### ⚠️ 연구 한계
- 실험 환경이 제한적(실내, 플라스틱 물병, 일정한 수위 상승 속도)으로 실제 자연 환경과 차이가 존재  
- HC-SR04 초음파 센서의 측정 정확도가 설치 각도와 환경 조건에 따라 민감하게 변동  
- 데이터 샘플 수 및 다양성 부족으로 모델 일반화에 한계가 있음  

---
